#  Network Device Discovery and Information Synchronization Tool (网络设备发现与信息同步工具)

## 介绍

该工具是一款网络设备管理实用程序，主要功能包括：

- 自动扫描当前子网内的所有活跃设备，获取其IP地址和MAC地址
- 检测本地设备上所有处于监听状态的程序及其端口
- 定期将发现的设备信息通过HTTP POST请求同步到本地监听程序的`/__gnip__`端点

工具采用多线程设计，能够高效地进行网络扫描和信息同步，适用于需要实时获取局域网设备信息的场景，可帮助开发人员快速构建基于局域网设备发现的应用系统。

## 安装

### 环境要求
- Python 3.6 及以上版本
- 支持Windows操作系统 （Linux和macOS好像也行但没试过）

### 依赖安装
1. 克隆或下载代码库到本地
2. 安装所需依赖库：
```bash
pip install psutil netifaces requests
```

## 部署

### 本地部署
1. 将代码库文件放置在本地目录，确保包含以下文件：
   - main.py（主程序入口）
   - gnip.py（IP地址计算工具）
   - file.py（网络工具函数）

2. 直接运行主程序：
```bash
python main.py
```

程序启动后将自动在后台运行，无需额外配置，默认执行以下操作：
- 扫描当前子网内的设备（最多512个IP地址），IP地址扫描顺序以本机IP为基准，按照网络地址规则排序，确保从与本机IP最接近的地址开始扫描，逐步扩展至整个子网范围
- 检测本地所有监听端口的程序
- 每1秒向有效程序同步一次设备信息

### 被同步程序要求
需要接收设备信息的本地程序需满足：
1. 处于监听状态，可通过本地端口访问
2. 提供`/__gnip__`端点，支持POST请求
3. 对验证请求（`{"type": false}`）返回`{"message": 200}`
4. 对设备信息请求（`{"type": true, "device_list": [...]}`）返回`{"message": 200}`

### 注意事项
- 建议为程序设置开机自动启动
- 程序需要足够的权限执行网络扫描（如ICMP Ping操作）
- 防火墙设置可能影响设备发现和信息同步功能，必要时需配置防火墙规则
- 在大型网络环境中，可能需要调整代码中的扫描参数以优化性能
- 512个IP地址的扫描范围以本机IP为核心进行排序

## 说明
- 个人开发, 且偏向实用主义, 很多不合理的程序结构与好像很弱的跨设备兼容性
- 个人感觉程序一坨, 当个乐子看就好

本程序基于**Apache License 2.0**协议开源

## 免责声明

本软件按"原样"提供，不附带任何明示或暗示的担保，包括但不限于对适销性、特定用途适用性及非侵权性的默示担保。在任何情况下，作者或版权持有人均不对因使用本软件或本软件的使用无法实现而导致的任何直接、间接、偶然、特殊、惩戒性或后果性损害（包括但不限于采购替代商品或服务；使用价值、数据或利润的损失；或业务中断）承担责任，无论这些损害是否由使用或未能使用本软件引起，即使已被告知此类损害发生的可能性。

本软件包含的端口扫描功能仅授权用户用于其合法拥有所有权或已获得明确书面授权的设备及网络。用户应自行确保使用行为符合相关法律法规，严禁对未经授权的第三方设备或网络进行扫描。因违反上述要求导致的任何法律责任或纠纷，由用户自行承担，与本软件的作者及版权持有人无关。

根据本许可证，您有权使用、复制、修改、分发、再许可本软件，并可将本软件用于商业用途，但需遵守《Apache License 2.0》的全部条款，包括但不限于保留版权声明、许可声明及本免责声明。
